{% extends "base.html" %}

{% block content %}
<form class="search-form" action="/search" method="get">
    <input type="text" name="q" placeholder="Search papers by title or abstract..." autofocus>
</form>

<p class="stats">{{ num_papers }} papers in the dataset · Sorted by citation count</p>

<div class="papers-list">
    {% for paper in papers %}
    <div class="paper-card">
        <h2><a href="/paper/{{ paper.arxiv_id }}">{{ paper.title }}</a></h2>
        <div class="meta">
            <span class="citation-count">{{ paper.cited_by_count }} citations</span>
            {% if paper.published %}
                · {{ paper.published[:10] }}
            {% endif %}
            · {{ paper.arxiv_id }}
        </div>
        {% if paper.categories %}
        <div style="margin-bottom: 0.5rem;">
            {% for cat in paper.categories[:3] %}
                <span class="tag">{{ cat }}</span>
            {% endfor %}
        </div>
        {% endif %}
        <p class="abstract">{{ paper.abstract[:300] }}{% if paper.abstract|length > 300 %}...{% endif %}</p>
    </div>
    {% endfor %}
</div>

{% if total_pages > 1 %}
<nav class="pagination">
    {% if page > 1 %}
        <a href="/?page={{ page - 1 }}" class="page-link">← Previous</a>
    {% else %}
        <span class="page-link disabled">← Previous</span>
    {% endif %}
    
    <span class="page-info">Page {{ page }} of {{ total_pages }}</span>
    
    {% if page < total_pages %}
        <a href="/?page={{ page + 1 }}" class="page-link">Next →</a>
    {% else %}
        <span class="page-link disabled">Next →</span>
    {% endif %}
</nav>
{% endif %}
{% endblock %}

